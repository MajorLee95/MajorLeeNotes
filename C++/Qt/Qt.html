
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta charset="utf-8" />
    <title>Notes sur Qt &#8212; Documentation MajorLee&#39;s notes </title>
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Recherche" href="../../search.html" />
    <link rel="next" title="Les objets connectés" href="../../lesObjetsConnectes/lesObjetsConnectes.html" />
    <link rel="prev" title="Note concernant Visal C++ 2013 *" href="../visualCpp/visual.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../lesObjetsConnectes/lesObjetsConnectes.html" title="Les objets connectés"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="../visualCpp/visual.html" title="Note concernant Visal C++ 2013 *"
             accesskey="P">précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation MajorLee&#39;s notes </a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../cpp.html" accesskey="U">Mes notes sur C++</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="notes-sur-qt">
<h1><a class="toc-backref" href="#table-des-matieres-qt">Notes sur Qt</a><a class="headerlink" href="#notes-sur-qt" title="Lien permanent vers ce titre">¶</a></h1>
<a class="reference internal image-reference" href="../../_images/qtLogo.jpg"><img alt="Qt logo" class="align-left" src="../../_images/qtLogo.jpg" style="height: 100px;" /></a>
<dl class="field-list simple">
<dt class="field-odd">Auteur</dt>
<dd class="field-odd"><p>J.Soranzo</p>
</dd>
<dt class="field-even">Date</dt>
<dd class="field-even"><p>Novembre 2019</p>
</dd>
<dt class="field-odd">Société</dt>
<dd class="field-odd"><p>VoLAB</p>
</dd>
<dt class="field-even">Entity</dt>
<dd class="field-even"><p>VoRoBoTics</p>
</dd>
</dl>
<p><div class="clearer"></div></p>
<div class="contents topic" id="table-des-matieres-qt">
<p class="topic-title first">Table des matières Qt</p>
<ul class="simple">
<li><p><a class="reference internal" href="#notes-sur-qt" id="id51">Notes sur Qt</a></p>
<ul>
<li><p><a class="reference internal" href="#presentation" id="id52">Présentation</a></p>
<ul>
<li><p><a class="reference internal" href="#les-outils-qt" id="id53">Les outils Qt</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#installation" id="id54">Installation</a></p></li>
<li><p><a class="reference internal" href="#service-minimum" id="id55">Service minimum</a></p>
<ul>
<li><p><a class="reference internal" href="#appli-console" id="id56">Appli console</a></p></li>
<li><p><a class="reference internal" href="#appli-graphique" id="id57">Appli graphique</a></p></li>
<li><p><a class="reference internal" href="#utilisation-avec-qt-designer" id="id58">Utilisation avec Qt Designer</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#autres-choses" id="id59">Autres choses</a></p>
<ul>
<li><p><a class="reference internal" href="#qt-et-repertoires" id="id60">Qt et répertoires</a></p></li>
<li><p><a class="reference internal" href="#mode-debug" id="id61">Mode debug</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#classes-qui-me-semblent-les-plus-utiles" id="id62">Classes qui me semblent les plus utiles</a></p>
<ul>
<li><p><a class="reference internal" href="#de-base" id="id63">De base</a></p></li>
<li><p><a class="reference internal" href="#advanced" id="id64">Advanced</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#apres-modification-du-fichier-pro" id="id65">Après modification du fichier pro</a></p></li>
<li><p><a class="reference internal" href="#qt-widgets-vs-qt-quick-application" id="id66">Qt widgets vs Qt Quick application</a></p></li>
<li><p><a class="reference internal" href="#comprendre-signals-et-slots" id="id67">Comprendre signals et slots</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id68">Présentation</a></p></li>
<li><p><a class="reference internal" href="#utilisation" id="id69">Utilisation</a></p></li>
<li><p><a class="reference internal" href="#connaitre-l-emetteur-d-un-signal-dans-un-slot" id="id70">Connaître l’émetteur d’un signal dans un slot</a></p></li>
<li><p><a class="reference internal" href="#creation" id="id71">Création</a></p></li>
<li><p><a class="reference internal" href="#autoconnect" id="id72">Autoconnect</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#petits-tracas" id="id73">Petits tracas</a></p></li>
<li><p><a class="reference internal" href="#cout" id="id74">cout</a></p>
<ul>
<li><p><a class="reference internal" href="#undifined-cout" id="id75">undifined cout</a></p></li>
<li><p><a class="reference internal" href="#qstring-vs-cout" id="id76">QString vs cout</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#boite-de-dialogue-standard" id="id77">Boîte de dialogue standard</a></p></li>
<li><p><a class="reference internal" href="#qt-layout" id="id78">Qt layout</a></p></li>
<li><p><a class="reference internal" href="#communication-reseau" id="id79">Communication réseau</a></p>
<ul>
<li><p><a class="reference internal" href="#architecture-client-serveur" id="id80">Architecture client/serveur</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#tips" id="id81">Tips</a></p></li>
<li><p><a class="reference internal" href="#deploiement" id="id82">Deploiement</a></p>
<ul>
<li><p><a class="reference internal" href="#qt-static-linking" id="id83">Qt static linking</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#qt-and-snippets" id="id84">Qt and snippets</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id85">Création</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id86">Utilisation</a></p></li>
<li><p><a class="reference internal" href="#sauvegardes" id="id87">Sauvegardes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#weblinks" id="id88">Weblinks</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="presentation">
<h2><a class="toc-backref" href="#table-des-matieres-qt">Présentation</a><a class="headerlink" href="#presentation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Bon <a class="reference external" href="https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1898935-initiez-vous-a-qt">cours sur Openclassroom</a> <a class="footnote-reference brackets" href="#id6" id="id7">2</a></p>
<p>Une <a class="reference external" href="https://www.youtube.com/watch?v=050zzD4c-5c">vidéo globale</a> <a class="footnote-reference brackets" href="#id4" id="id5">1</a> sur Youtube (traite seulement des applications QWidget)</p>
<p>Plus qu’une bibliothèque Qt est un framework multiplateforme. Il vient de l’écosystème KDE.</p>
<p>Il est composé de modules: core, GUI, dessin, reseau, xml, script, SVG, SQL… SerialPort</p>
<p id="index-1">la <a class="reference external" href="https://doc.qt.io/">doc de Qt</a> <a class="footnote-reference brackets" href="#id9" id="id10">3</a> est ici.</p>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Les getteurs ne s’appellent pas getAttribut() mais directement attribut(). En revanche les
setteurs s’appellent bien setAttribut.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>La règle de nommage est le lowerCamelCase</p>
</div>
<div class="section" id="les-outils-qt">
<h3><a class="toc-backref" href="#table-des-matieres-qt">Les outils Qt</a><a class="headerlink" href="#les-outils-qt" title="Lien permanent vers ce titre">¶</a></h3>
<p>Qt est un framework certes. C’est donc une énorme bibliothèque.</p>
<p>Mais c’est aussi un ensemble d’outils parmis lesquels on est un peu perdu quand on débute.</p>
<p>Le premier outil absolument nécessaire est l’IDE. Il aurait pu se nomme Qt IDE mais non !</p>
<p>L’IDE de Qt est <em>Qt creator</em>. Si il n’y avait qu’un seul outil Qt ce serait celui-là.</p>
<p>On peut éditer son code notamment programmer son interface graphique et le debugger.</p>
<p>Le second outil pas nécessaire mais rapidement indispensable est Qt Designer.</p>
<p>Qt Designer permet de dessiner ses fenêtres. Bien qu’on puisse le faire directement en codant dans
Qt creator, avec Qt Designer on s’évite d’avoir à fournir des positions en pixel pour chaque élément
de sa/ses boîte de dialogues.</p>
<p>Les premiers chapitres dédiés à Qt dans les <a class="reference external" href="https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1898935-initiez-vous-a-qt">cours sur Openclassroom</a> <a class="footnote-reference brackets" href="#id6" id="id8">2</a> n’utilisent pas Qt Designer et montrent
comment faire sans.</p>
</div>
</div>
<div class="section" id="installation">
<span id="index-2"></span><h2><a class="toc-backref" href="#table-des-matieres-qt">Installation</a><a class="headerlink" href="#installation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il faut son permis de conduire ! Bien que certaines case soient déjà cochées cela ne suffit pas.</p>
<p>Il faut choisir au moins un environnement (kits) mingw par exemple (32 et 64 bits).</p>
<p>Ne pas hésiter à consulter : <a class="reference external" href="https://guillaumebelz.github.io/qtinstall/">Installation et premiers pas avec Qt 5.12</a> <a class="footnote-reference brackets" href="#id11" id="id12">4</a></p>
</div>
<div class="section" id="service-minimum">
<h2><a class="toc-backref" href="#table-des-matieres-qt">Service minimum</a><a class="headerlink" href="#service-minimum" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="appli-console">
<h3><a class="toc-backref" href="#table-des-matieres-qt">Appli console</a><a class="headerlink" href="#appli-console" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;QCoreApplication&gt;</span><span class="cp"></span>
    <span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>


    <span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
    <span class="p">{</span>
            <span class="n">QCoreApplication</span> <span class="n">a</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>

            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;hello&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

            <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">exec</span><span class="p">();</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="appli-graphique">
<h3><a class="toc-backref" href="#table-des-matieres-qt">Appli graphique</a><a class="headerlink" href="#appli-graphique" title="Lien permanent vers ce titre">¶</a></h3>
<p>N’importe quel QWidget peut faire office de fénêtre. Donc pour créer un fenêtre minimum,
il suffit de créer un QWidget : <em>QWidget fen;</em> suivi d’un <em>fen.show();</em></p>
<p>Fichier .pro</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QT</span> <span class="o">+=</span> <span class="n">widgets</span>

<span class="n">SOURCES</span> <span class="o">+=</span> \
   <span class="n">main</span><span class="o">.</span><span class="n">cpp</span> \
   <span class="n">mafenetre</span><span class="o">.</span><span class="n">cpp</span>

<span class="n">HEADERS</span> <span class="o">+=</span> \
   <span class="n">mafenetre</span><span class="o">.</span><span class="n">h</span>
</pre></div>
</div>
<p>Fichier main.cpp:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;QApplication&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;QPushButton&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;mafenetre.h&quot;</span><span class="cp"></span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[]){</span>
   <span class="n">QApplication</span> <span class="n">app</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>

   <span class="n">MaFenetre</span> <span class="n">fen</span><span class="p">;</span>
   <span class="n">fen</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>

   <span class="k">return</span> <span class="n">app</span><span class="p">.</span><span class="n">exec</span><span class="p">();</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Fichier mafenetre.h:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#ifndef DEF_MAFENETRE</span>
<span class="cp">#define DEF_MAFENETRE</span>

<span class="cp">#include</span> <span class="cpf">&lt;QWidget&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;QPushButton&gt;</span><span class="cp"></span>

<span class="k">class</span> <span class="nc">MaFenetre</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QWidget</span> <span class="c1">// On hérite de QWidget (IMPORTANT)</span>
<span class="p">{</span>
   <span class="k">public</span><span class="o">:</span>
   <span class="n">MaFenetre</span><span class="p">();</span>
   <span class="o">~</span><span class="n">MaFenetre</span><span class="p">();</span>

   <span class="k">private</span><span class="o">:</span>
   <span class="n">QPushButton</span> <span class="o">*</span><span class="n">m_bouton</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#endif</span>
</pre></div>
</div>
<p>Fichier mafenetre.cpp</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;mafenetre.h&quot;</span><span class="cp"></span>

<span class="n">MaFenetre</span><span class="o">::</span><span class="n">MaFenetre</span><span class="p">()</span>
<span class="p">{</span>
   <span class="n">setFixedSize</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">100</span><span class="p">);</span>
   <span class="n">m_bouton</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s">&quot;OK button&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>

<span class="p">}</span>

<span class="n">MaFenetre</span><span class="o">::~</span><span class="n">MaFenetre</span><span class="p">(){</span>
   <span class="k">delete</span> <span class="n">m_bouton</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>On peut également créer une application minimum sans QDesigner et donc sans fichier .ui en décochant
la case <em>Generate form</em> on a alors une appliminimum qui utilise la <a class="reference external" href="https://doc.qt.io/qt-5/qmainwindow.html">classe QMainWindow</a> <a class="footnote-reference brackets" href="#id13" id="id14">5</a></p>
<p>Ou encore basée sur les classes QWidget ou QDialog comme sur la copie d’écran ci-dessous:</p>
<a class="reference internal image-reference" href="../../_images/screenNewApp.jpg"><img alt="alternate text" class="align-center" src="../../_images/screenNewApp.jpg" style="width: 500px;" /></a>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<dl class="simple">
<dt>Quand on uilise un ui generé par QtDesigner, il faut faire précédé ses widget par ui-&gt;.</dt><dd><p>Pas forcément il suffit de faire hérité en private sa fenetre de l’ui comme dans l’exemple OpenClassRoom</p>
</dd>
</dl>
</div>
<p>Exemple <a class="reference external" href="https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1902751-communiquez-en-reseau-avec-son-programme">openclassroom ui</a> <a class="footnote-reference brackets" href="#id15" id="id16">6</a> chat client</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#ifndef HEADER_FENCLIENT</span>
    <span class="cp">#define HEADER_FENCLIENT</span>

    <span class="cp">#include</span> <span class="cpf">&lt;QtWidgets&gt;</span><span class="cp"></span>
    <span class="cp">#include</span> <span class="cpf">&lt;QtNetwork&gt;</span><span class="cp"></span>
    <span class="cp">#include</span> <span class="cpf">&quot;ui_FenClient.h&quot;</span><span class="cp"></span>


    <span class="k">class</span> <span class="nc">FenClient</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QWidget</span><span class="p">,</span> <span class="k">private</span> <span class="n">Ui</span><span class="o">::</span><span class="n">FenClient</span>
    <span class="p">{</span>
            <span class="n">Q_OBJECT</span>

            <span class="k">public</span><span class="o">:</span>
                    <span class="n">FenClient</span><span class="p">();</span>
    <span class="c1">//...</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="utilisation-avec-qt-designer">
<span id="index-3"></span><h3><a class="toc-backref" href="#table-des-matieres-qt">Utilisation avec Qt Designer</a><a class="headerlink" href="#utilisation-avec-qt-designer" title="Lien permanent vers ce titre">¶</a></h3>
<p>C’est pas aussi trivial qu’il n’y parait !</p>
<p>Il n’y a pas vraiment de tuto internet C++/Qt Designer ceux qu’on trouve c’est pour Python !</p>
<p>Pb dans l’exemple client chat d’Openclassroom, il y a un fichier auto généré ui_fenclient.h
mais je ne sais plus comment ?</p>
<p>Ce n’est pas dans les tuto Qt que cette technique est expliquée.</p>
<p>On le retrouve dans l’aide Qt : <a class="reference external" href="https://doc.qt.io/qt-5/designer-using-a-ui-file.html">using a Designer UI File inYour Application</a> <a class="footnote-reference brackets" href="#id17" id="id18">7</a></p>
<p>Il s’agit en fait d’un fichier auto généré par qmake au moment de la compilation.</p>
<p>Nécessite d’avoir dans le fichier .pro QT += widgets.</p>
<p>Ce fichier est placé dans le répertoire de compilation pas dans les sources !!!</p>
<p>Pour le moment, je vais continuer d’utiliser la syntaxe ui-&gt; devant tous les objets créés dans
Qt Desinger…</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A propos de la mise à jour du fichier d’entête ui_claasFenetre.h : ce n’est pas qmake qui met à
jour ce fichier mais bien le processus de compilation et donc le make file…</p>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="autres-choses">
<h2><a class="toc-backref" href="#table-des-matieres-qt">Autres choses</a><a class="headerlink" href="#autres-choses" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="qt-et-repertoires">
<h3><a class="toc-backref" href="#table-des-matieres-qt">Qt et répertoires</a><a class="headerlink" href="#qt-et-repertoires" title="Lien permanent vers ce titre">¶</a></h3>
<p>Qt a tendance à prendre ses aises dans le répertoire du projet:</p>
<ul class="simple">
<li><p>les fichiers compilés se trouvent à un niveau supérieur par rapport au projet</p></li>
<li><p>les noms de ces répertoires sont <strong>excessivement long</strong> !</p></li>
</ul>
<p>Le fait que les fichiers compilés se trouve à un niveau supérieur peut être déroutant au début mais
a l’usage cela peut s’avérer utile quand, par exemple, on veut récupérer ses fichiers sources
de plusieurs projets en méme temps pour les déplacer sur une autre machine.</p>
</div>
<div class="section" id="mode-debug">
<span id="index-4"></span><h3><a class="toc-backref" href="#table-des-matieres-qt">Mode debug</a><a class="headerlink" href="#mode-debug" title="Lien permanent vers ce titre">¶</a></h3>
<a class="reference internal image-reference" href="../../_images/ScreenshotdebugBoutons.png"><img alt="boutons de debug" class="align-center" src="../../_images/ScreenshotdebugBoutons.png" style="width: 500.0px; height: 268.0px;" /></a>
<dl class="simple">
<dt>Attention ces boutons verts ne sont pas identiques. Celui du haut lance un nouveau debug</dt><dd><p>Celui du bas refait la même cession !</p>
</dd>
</dl>
</div>
</div>
<hr class="docutils" />
<div class="section" id="classes-qui-me-semblent-les-plus-utiles">
<h2><a class="toc-backref" href="#table-des-matieres-qt">Classes qui me semblent les plus utiles</a><a class="headerlink" href="#classes-qui-me-semblent-les-plus-utiles" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="de-base">
<h3><a class="toc-backref" href="#table-des-matieres-qt">De base</a><a class="headerlink" href="#de-base" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference external" href="https://doc.qt.io/qt-5/qwidget.html">QWidget</a> <a class="footnote-reference brackets" href="#id21" id="id22">9</a> : une fenêtre est un widget, donc .show() s’applique.</p>
<p><a class="reference external" href="https://doc.qt.io/qt-5/qpushbutton.html">QPushButton</a> <a class="footnote-reference brackets" href="#id23" id="id24">10</a> est aussi un widget</p>
<p><a class="reference external" href="https://doc.qt.io/qt-5/qlineedit.html">QLineEdit</a> <a class="footnote-reference brackets" href="#id19" id="id20">8</a> pour entrer du texte</p>
<p>QTextEdit + les layouts.</p>
</div>
<div class="section" id="advanced">
<h3><a class="toc-backref" href="#table-des-matieres-qt">Advanced</a><a class="headerlink" href="#advanced" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference external" href="https://doc.qt.io/qt-5/qfilesystemmodel.html#example-usage">QFileSystemModel</a> <a class="footnote-reference brackets" href="#id25" id="id26">11</a> et <a class="reference external" href="https://doc.qt.io/qt-5/qfilesystemmodel.html#example-usage">QTreeView</a> <a class="footnote-reference brackets" href="#id25" id="id27">11</a> permettent de faire une arborescence disque en quelques lignes…</p>
<p>Il y a l”<a class="reference external" href="https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1902176-decouvrez-l-architecture-mvc-avec-les-widgets-complexes#/id/r-1902175">exemple de QStringList</a> <a class="footnote-reference brackets" href="#id28" id="id29">12</a> avec sélection dans OpenClassroom</p>
<p>More advenced :</p>
<p>QDataStream, QTcpSocket, QTcpServer</p>
<p id="index-5">qobject_cast&lt;&gt;() : pas vraiment une classe mais fort utile ! Permet de faire du dynamique_cast mais
seulement sur des QObjet (et ses dérivées) sans utiliser le Run Time Type Information (RTTI).</p>
<p><span class="target" id="index-6"></span>RTTI donc dynamic_cast&lt;&gt;() qui de plus est compilo dépendant !</p>
<p>Référence : <a class="reference external" href="https://stackoverflow.com/questions/43994584/what-is-qobject-cast">qobject_cast sur stackoverflow</a> <a class="footnote-reference brackets" href="#id30" id="id31">13</a></p>
<p>Exemple classique d’utilisation dans un slot sender() renvoi un pointeur sur QObject qu’on peut
alors cast sur un QPushButton par exemple:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span> <span class="n">btn</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">QPushButton</span><span class="o">::</span><span class="n">clicked</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">MyClass</span><span class="o">::</span><span class="n">onClicked</span> <span class="p">);</span>

<span class="kt">void</span> <span class="n">MyClass</span><span class="o">::</span><span class="n">onClicked</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// How to get pointer to a button:</span>
    <span class="n">QObject</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">sender</span><span class="p">();</span>
    <span class="c1">// It&#39;s QObject. Now we need to cast it to button:</span>
    <span class="n">QPushButton</span> <span class="o">*</span><span class="n">btn</span> <span class="o">=</span> <span class="n">qobject_cast</span><span class="o">&lt;</span><span class="n">QPushButon</span> <span class="o">*&gt;</span><span class="p">(</span> <span class="n">p</span> <span class="p">);</span>
    <span class="n">Q_ASSERT</span><span class="p">(</span> <span class="n">btn</span> <span class="o">!=</span> <span class="k">nullptr</span> <span class="p">);</span> <span class="c1">// Check that a cast was successfull</span>
    <span class="c1">// Now we can use a QObject as a button:</span>
    <span class="n">btn</span><span class="o">-&gt;</span><span class="n">setText</span><span class="p">(</span> <span class="s">&quot;We just clicked on a button!&quot;</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>On nottera au passage la nouvelle syntaxe possible de connect qui n’utilise pas SIGNAL() et SLOT()</p>
</div>
</div>
<div class="section" id="apres-modification-du-fichier-pro">
<h2><a class="toc-backref" href="#table-des-matieres-qt">Après modification du fichier pro</a><a class="headerlink" href="#apres-modification-du-fichier-pro" title="Lien permanent vers ce titre">¶</a></h2>
<p id="index-7">QApplication not found.</p>
<p>Ajouter : QT += widgets</p>
<p>Et <strong>Exécuter qmake</strong>.</p>
</div>
<div class="section" id="qt-widgets-vs-qt-quick-application">
<h2><a class="toc-backref" href="#table-des-matieres-qt">Qt widgets vs Qt Quick application</a><a class="headerlink" href="#qt-widgets-vs-qt-quick-application" title="Lien permanent vers ce titre">¶</a></h2>
<p>Qt Quick plutôt dédié aux applications de style mobile (Développement en QML et javascript).</p>
<p>Qt Widget plutôt pour les applications de style Desktop.</p>
<hr class="docutils" />
</div>
<div class="section" id="comprendre-signals-et-slots">
<span id="index-8"></span><h2><a class="toc-backref" href="#table-des-matieres-qt">Comprendre signals et slots</a><a class="headerlink" href="#comprendre-signals-et-slots" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#table-des-matieres-qt">Présentation</a><a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h3>
<p>Signaux : données émises (messages) par une classe en réaction à un évènement</p>
<p>Slot méthode spéciale qui permet de réagir à un évènement</p>
<p>Un signal déclenche en général un slot. On dit un signal est connecté à un slot.</p>
</div>
<div class="section" id="utilisation">
<h3><a class="toc-backref" href="#table-des-matieres-qt">Utilisation</a><a class="headerlink" href="#utilisation" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour connecter un signal à un slot, on utilise la méthode connect() <strong>(méthode statique de QObject)</strong></p>
<p>Exemple:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span><span class="n">m_bouton</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">clicked</span><span class="p">()),</span> <span class="n">qApp</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">quit</span><span class="p">()));</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>SIGNAL() et SLOT() sont des macros obligatoires.</p>
</div>
<p>C’est l’équivalent de DoDataExchange et de ses macros DDX_control, DDX_Text et de la macro
BEGIN_MESSAGE_MAP de VisualCpp</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>qApp est un pointeur sur l’objet QApplication créé automatiquement (#include &lt;QApplication&gt;).</p>
</div>
<p>On peut passer des paramètres aux travers des signaux/slots</p>
<p>Exemples:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span><span class="n">m_slider</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">valueChanged</span><span class="p">(</span><span class="kt">int</span><span class="p">)),</span> <span class="n">m_lcd</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">display</span><span class="p">(</span><span class="kt">int</span><span class="p">)))</span> <span class="p">;</span>
<span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span><span class="n">m_slider</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">valueChanged</span><span class="p">(</span><span class="kt">int</span><span class="p">)),</span> <span class="n">m_bar</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">setValue</span><span class="p">(</span><span class="kt">int</span><span class="p">)))</span> <span class="p">;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ne pas oublier que les slot et les signaux s’héritent</p>
</div>
</div>
<div class="section" id="connaitre-l-emetteur-d-un-signal-dans-un-slot">
<span id="index-9"></span><h3><a class="toc-backref" href="#table-des-matieres-qt">Connaître l’émetteur d’un signal dans un slot</a><a class="headerlink" href="#connaitre-l-emetteur-d-un-signal-dans-un-slot" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour déterminer l’objet à l’origine d’un signal (cas de plusieurs objetc connecté au même slot),
on utilise la méthode <a class="reference external" href="https://doc.qt.io/qt-5/qobject.html#sender">sender()</a> <a class="footnote-reference brackets" href="#id32" id="id33">14</a> de la class QObject</p>
</div>
<div class="section" id="creation">
<h3><a class="toc-backref" href="#table-des-matieres-qt">Création</a><a class="headerlink" href="#creation" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour pouvoir créer son propre signal <strong>ou</strong> slot dans une classe, il faut que celle-ci dérive
directement ou indirectement de QObject (un QWidget c’est bon par exemple)</p>
<blockquote>
<div><ul class="simple">
<li><p>Créer la macro Q_OBJECT dans le header de la classe</p></li>
<li><p>Exécuter qmake</p></li>
<li><p>Ajouter <em>public slots:</em> dans le header de la classe suivi d’une ou plusieurs méthodes pour définir les slots.</p></li>
<li><p>Pour un signal ajouter <em>signals:</em> suivi du prototype de la méthodes</p></li>
</ul>
</div></blockquote>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Les méthodes signals: ne sont pas à implémenter dans le .cpp</p>
</div>
<p>Pour émettre un signal dempuis le code on utilise le mot clé <em>emit</em> suivi du nom de la
méthode avec ses paramètre (on sépare de <em>emit</em> avec un espace - pas de parenthèses !)</p>
<p>Oserai-je un petit exemple ! Tiré du cours c++ de Openclassroom:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;mafenetre.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;QPushButton&gt;</span><span class="cp"></span>


<span class="n">MaFenetre</span><span class="o">::</span><span class="n">MaFenetre</span><span class="p">()</span>
<span class="p">{</span>
   <span class="n">setFixedSize</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>
   <span class="n">m_bouton</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s">&quot;Quit&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
   <span class="n">m_bouton</span><span class="o">-&gt;</span><span class="n">setFont</span><span class="p">(</span><span class="n">QFont</span><span class="p">(</span><span class="s">&quot;Comic Sans MS&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">));</span>
   <span class="n">m_bouton</span><span class="o">-&gt;</span><span class="n">move</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">150</span><span class="p">);</span>



   <span class="n">m_slider</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QSlider</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">Horizontal</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
   <span class="n">m_slider</span><span class="o">-&gt;</span><span class="n">setRange</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">600</span><span class="p">);</span>
   <span class="n">m_slider</span><span class="o">-&gt;</span><span class="n">setGeometry</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">150</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span>





   <span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span><span class="n">m_bouton</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">clicked</span><span class="p">()),</span> <span class="n">qApp</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">quit</span><span class="p">()));</span>
   <span class="n">QObject</span><span class="o">::</span><span class="n">connect</span><span class="p">(</span><span class="n">m_slider</span><span class="p">,</span> <span class="n">SIGNAL</span><span class="p">(</span><span class="n">valueChanged</span><span class="p">(</span><span class="kt">int</span><span class="p">)),</span> <span class="k">this</span><span class="p">,</span> <span class="n">SLOT</span><span class="p">(</span><span class="n">changerLargeur</span><span class="p">(</span><span class="kt">int</span><span class="p">)));</span>

<span class="p">}</span>
<span class="n">MaFenetre</span><span class="o">::~</span><span class="n">MaFenetre</span><span class="p">(){</span>
   <span class="k">delete</span> <span class="n">m_bouton</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">MaFenetre</span><span class="o">::</span><span class="n">changerLargeur</span><span class="p">(</span><span class="kt">int</span> <span class="n">largeur</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">setFixedSize</span><span class="p">(</span><span class="n">largeur</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">largeur</span> <span class="o">==</span> <span class="mi">600</span> <span class="p">)</span> <span class="n">emit</span> <span class="n">largeurMax</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">//le header:</span>
<span class="cp">#ifndef MAFENETRE_H</span>
<span class="cp">#define MAFENETRE_H</span>
<span class="cp">#include</span> <span class="cpf">&lt;QApplication&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;QPushButton&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;QWidget&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;QSlider&gt;</span><span class="cp"></span>

<span class="k">class</span> <span class="nc">MaFenetre</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QWidget</span>
<span class="p">{</span>
   <span class="n">Q_OBJECT</span>

<span class="k">public</span><span class="o">:</span>
   <span class="n">MaFenetre</span><span class="p">();</span>
   <span class="o">~</span><span class="n">MaFenetre</span><span class="p">();</span>

<span class="k">public</span> <span class="nl">slots</span><span class="p">:</span>
   <span class="kt">void</span> <span class="n">changerLargeur</span><span class="p">(</span><span class="kt">int</span> <span class="n">largeur</span><span class="p">);</span>

<span class="nl">signals</span><span class="p">:</span>
   <span class="kt">void</span> <span class="n">largeurMax</span><span class="p">();</span>

<span class="k">private</span><span class="o">:</span>
   <span class="n">QPushButton</span> <span class="o">*</span><span class="n">m_bouton</span><span class="p">;</span>
   <span class="n">QSlider</span> <span class="o">*</span><span class="n">m_slider</span><span class="p">;</span>
<span class="p">};</span>
<span class="cp">#endif </span><span class="c1">// MAFENETRE_H</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Après avoir ajouté la macro Q_OBJECT, faire un qmake sinon erreur vTable</p>
</div>
<p>Pour plus de détails voir <a class="reference external" href="https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1899731-utilisez-les-signaux-et-les-slots#/id/r-1909507">signaux et slot dans OpenClassroom</a> <a class="footnote-reference brackets" href="#id34" id="id35">15</a></p>
</div>
<div class="section" id="autoconnect">
<span id="index-10"></span><h3><a class="toc-backref" href="#table-des-matieres-qt">Autoconnect</a><a class="headerlink" href="#autoconnect" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il n’est pas nécessaire de réaliser la connexion dans le cas d’un bouton par exemple.</p>
<p>Si on respecte une certaine convention, Qt reconnait et fait la connexion pour nous.</p>
<p>on_bouton_clicked() ( dommage se n’est pas du lowerCamelCase ! )</p>
<p>La <a class="reference external" href="https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1901673-modelisez-ses-fenetres-avec-qt-designer#/id/r-1911443">méthode auto-connect</a> <a class="footnote-reference brackets" href="#id36" id="id37">16</a> est expliquée sur Openclassroom</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="petits-tracas">
<h2><a class="toc-backref" href="#table-des-matieres-qt">Petits tracas</a><a class="headerlink" href="#petits-tracas" title="Lien permanent vers ce titre">¶</a></h2>
<p>Sous Linux appli console : n’affiche rien (en mode debug)</p>
<p>Supprimer dans le fichier pro CONFIG += console</p>
<p>qmake + clean up + build all</p>
<hr class="docutils" />
</div>
<div class="section" id="cout">
<span id="index-11"></span><h2><a class="toc-backref" href="#table-des-matieres-qt">cout</a><a class="headerlink" href="#cout" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="undifined-cout">
<h3><a class="toc-backref" href="#table-des-matieres-qt">undifined cout</a><a class="headerlink" href="#undifined-cout" title="Lien permanent vers ce titre">¶</a></h3>
<p>#include &lt;iostream&gt;</p>
<p>using namespace std;</p>
</div>
<div class="section" id="qstring-vs-cout">
<h3><a class="toc-backref" href="#table-des-matieres-qt">QString vs cout</a><a class="headerlink" href="#qstring-vs-cout" title="Lien permanent vers ce titre">¶</a></h3>
<p>L’opérateur &lt;&lt; n’étant as surchargé dans <span class="target" id="index-12"></span>QString, cout ne sait pas afficher QString.
Il faut opérer une conversion comme par exemple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QString</span><span class="p">::</span><span class="n">toLocal8Bit</span><span class="p">()</span><span class="o">.</span><span class="n">constData</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
</div>
<div class="section" id="boite-de-dialogue-standard">
<span id="index-13"></span><h2><a class="toc-backref" href="#table-des-matieres-qt">Boîte de dialogue standard</a><a class="headerlink" href="#boite-de-dialogue-standard" title="Lien permanent vers ce titre">¶</a></h2>
<a class="reference internal image-reference" href="../../_images/standardDialog.jpg"><img alt="QtStandard dialog" class="align-left" src="../../_images/standardDialog.jpg" style="width: 500px;" /></a>
<dl class="simple">
<dt>Juste un petit mémo pour signaler que les boîtes de dialogue standard (sélectionner fichier,</dt><dd><p>sélectionner font, sélectionner une couleur, simple message d’alerte…)
peuvent s’utiliser en statique (sans instance) tout au moins pour certaines cf. la doc rubriques
Static Public Members.</p>
</dd>
</dl>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;QFileDialog&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;QMessageBox&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;QColorDialog&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;QFontDialog&gt;</span><span class="cp"></span>
</pre></div>
</div>
<p><div class="clearer"></div></p>
<p>Dans la <a class="reference external" href="https://doc.qt.io/qt-5.9/standard-dialogs.html">doc officielle ici</a> <a class="footnote-reference brackets" href="#id38" id="id39">17</a></p>
<p>Exemple:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">::</span><span class="n">warning</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">tr</span><span class="p">(</span><span class="s">&quot;My Application&quot;</span><span class="p">),</span>
           <span class="n">tr</span><span class="p">(</span><span class="s">&quot;The document has been modified.</span><span class="se">\n</span><span class="s">&quot;</span>
              <span class="s">&quot;Do you want to save your changes?&quot;</span><span class="p">),</span>
           <span class="n">QMessageBox</span><span class="o">::</span><span class="n">Save</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">::</span><span class="n">Discard</span>
           <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">::</span><span class="n">Cancel</span><span class="p">,</span>
           <span class="n">QMessageBox</span><span class="o">::</span><span class="n">Save</span><span class="p">);</span>
</pre></div>
</div>
<p>Les niveaux de sévérité de QMessageBox : question, information, warning, critical  qui correspondent
à des membres statiques…</p>
</div>
<hr class="docutils" />
<div class="section" id="qt-layout">
<h2><a class="toc-backref" href="#table-des-matieres-qt">Qt layout</a><a class="headerlink" href="#qt-layout" title="Lien permanent vers ce titre">¶</a></h2>
<dl class="simple">
<dt>La classe QLayout est un classe abastraite ayant de nombreuses classes filles:</dt><dd><ul class="simple">
<li><p>QBoxLayout</p></li>
<li><p>QGridLayout</p></li>
<li><p>QFormLayout</p></li>
<li><p>QStackLayout</p></li>
<li><p>QVBoxLayout</p></li>
<li><p>QHBoxLayout</p></li>
</ul>
</dd>
</dl>
<p>L’intérêt majeur d’utiliser des Layout est leur faculté de redimensionnent automatique.</p>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Les layout ne sont pas des Widgets, des QObject oui mais pas  des QWidget donc ils n’héritent
pas de QWidget.</p>
</div>
<dl class="simple">
<dt>Méthodes importantes:</dt><dd><ul class="simple">
<li><p>addWidget</p></li>
</ul>
</dd>
<dt>Méthode fondamentale de la classe Widget en lien avec les layouts:</dt><dd><ul class="simple">
<li><p>setLayout</p></li>
</ul>
</dd>
</dl>
<div class="admonition tip">
<p class="admonition-title">Astuce</p>
<p>La classe QFormLayout possède une méthode addRow qui permet d’ajouter en un coup un QlineEdit et
sont étiquette.</p>
</div>
<hr class="docutils" id="index-14" />
</div>
<div class="section" id="communication-reseau">
<span id="index-15"></span><h2><a class="toc-backref" href="#table-des-matieres-qt">Communication réseau</a><a class="headerlink" href="#communication-reseau" title="Lien permanent vers ce titre">¶</a></h2>
<p>Référence : <a class="reference external" href="https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1902751-communiquez-en-reseau-avec-son-programme">OpenClassRoom Communiquez en réseau</a> <a class="footnote-reference brackets" href="#id15" id="id40">6</a></p>
<div class="section" id="architecture-client-serveur">
<h3><a class="toc-backref" href="#table-des-matieres-qt">Architecture client/serveur</a><a class="headerlink" href="#architecture-client-serveur" title="Lien permanent vers ce titre">¶</a></h3>
<p>Côté serveur:</p>
<ol class="arabic simple">
<li><p>Créer une instance de QTcpServer, ex : serveur</p></li>
<li><p>Utiliser la méthode listen( QHostAdress::Any, numPort)</p></li>
<li><p>Connecter SIGNAL/SLOT entre le signal newConnection et un slot, ex: nouvelleConnexion()</p></li>
</ol>
<p>QHostAdress::Any : permet d’écouter sur toutes les adresses de la machine.</p>
<p>Tout réside dans le slot nouvelleConnection</p>
<p>Chaque nouveau client est une instance d’un pointeur sur QTcpSocket (initialisé avec le retour de
serveur-&gt;nextPendingConnexion() ) et rangé dans un tableau, de préférence, dynamique.</p>
<p>Une QList de pointeurs sur QTcpSocket par exemple.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">QList</span><span class="o">&lt;</span><span class="n">QTcpSocket</span> <span class="o">*&gt;</span> <span class="n">clients</span>
</pre></div>
</div>
<p>On connect alors les signaux readyRead() et disconnected() de chacune de ces instances à 2 slots
exemple : receiveData() et deconnectClient()</p>
<p>Réception des données : QTcpSocket émet donc pour chaque instance (client connecté) un signal
readyRead connecté à la seule méthode (slot) de réception. C’est là qu’intervient la méthode
sender() de la classe QObject.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">QTcpSocket</span> <span class="o">*</span><span class="n">socket</span> <span class="o">=</span> <span class="n">qobject_cast</span><span class="o">&lt;</span><span class="n">QTcpSocket</span> <span class="o">*&gt;</span><span class="p">(</span><span class="n">sender</span><span class="p">());</span>
<span class="p">...</span>
<span class="n">QDataStream</span> <span class="n">in</span><span class="p">(</span><span class="n">socket</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>QDataStream : accepte en entrée QTcpSocket car cette dernière est conforme à la classe abstraite
QIODevice.</p>
</div>
<p><a class="reference external" href="https://doc.qt.io/qt-5/qdatastream.html#details">Doc officielle QDataStream</a> <a class="footnote-reference brackets" href="#id41" id="id42">18</a></p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="tips">
<h2><a class="toc-backref" href="#table-des-matieres-qt">Tips</a><a class="headerlink" href="#tips" title="Lien permanent vers ce titre">¶</a></h2>
<p>#include &lt;QtWidgets&gt; évite de faire des includes un à un en fonction des Widgets utilisés. C’est un
méga include.</p>
<p>Une alternative à setLayout( layout ) est de passer l’adresse du widget au constructeur du layout.</p>
<p>Voir la <a class="reference external" href="https://doc.qt.io/qt-5/qwidget.html#setLayout">documentation de setlayout</a> <a class="footnote-reference brackets" href="#id43" id="id44">19</a></p>
<p>Slot auto-connect : voir <a class="reference internal" href="#autoconnect">Autoconnect</a></p>
<hr class="docutils" />
</div>
<div class="section" id="deploiement">
<span id="index-16"></span><h2><a class="toc-backref" href="#table-des-matieres-qt">Deploiement</a><a class="headerlink" href="#deploiement" title="Lien permanent vers ce titre">¶</a></h2>
<p>deployment en anglais</p>
<p>Il y a bien évidement la page de référence de la <a class="reference external" href="https://doc.qt.io/qt-5/windows-deployment.html">documentation Qt sur le déploiement</a> <a class="footnote-reference brackets" href="#id45" id="id46">20</a></p>
<p>Mais aussi : sur le site de <a class="reference external" href="http://guillaume.belz.free.fr/doku.php?id=deployer_une_application_qt">Guillaume Beltz</a> <a class="footnote-reference brackets" href="#id47" id="id48">21</a></p>
<p>Pour moi windeployqt.exe se trouve dans :</p>
<p>QtQt5.12.65.12.6mingw73_64bin : donc il est dépendant du kit utilisé !</p>
<p>J’ai ajouté le chemin directement dans la cosole (la mano)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">windeploy</span> <span class="o">--</span><span class="nb">list</span> <span class="n">target</span> <span class="n">nom_appli</span><span class="o">.</span><span class="n">exe</span>
</pre></div>
</div>
<p>Ne se contente pas de lister les fichier mais fais réellement la copie.</p>
<p>Pour ne pas faire la copie il faut faire:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">windeploy</span> <span class="o">--</span><span class="n">dry</span><span class="o">-</span><span class="n">run</span> <span class="o">--</span><span class="nb">list</span> <span class="n">target</span> <span class="n">nom_appli</span><span class="o">.</span><span class="n">exe</span>
</pre></div>
</div>
<p>Une technique que j’ai expérimenté:
#. Dans un nouveau dossier copié l’éxécutable complilé en mode realese
#. Identifier le kit utilisé (et sa bonne version), ex MinGW.7.30 64bits
#. Copier toutes les dll de QtQt5.12.65.12.6mingw73_64bin vers le nouveau répertoire
#. Virer petit à petit celle qui ne serve pas et relancer l’exe a chaque fois.</p>
<p>Cette technique est inspirée du site <a class="reference external" href="https://wiki.qt.io/Deploy_an_Application_on_Windows/fr">wiki.qt.io</a> <a class="footnote-reference brackets" href="#id49" id="id50">22</a></p>
<p>On pourra soit bosser directement dans le dossier realese avec windeployqt soit dans un nouveau
dossier en y recopiant le .exe (inutile de chercher à spécifier un source dir et un dest dir)</p>
<div class="section" id="qt-static-linking">
<h3><a class="toc-backref" href="#table-des-matieres-qt">Qt static linking</a><a class="headerlink" href="#qt-static-linking" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cela se passe dans le fichier .pro principalement donc inutile de chercher une cas à cocher !</p>
<p>Semble très complexe et déconseillé.</p>
<hr class="docutils" />
</div>
</div>
<div class="section" id="qt-and-snippets">
<span id="index-17"></span><h2><a class="toc-backref" href="#table-des-matieres-qt">Qt and snippets</a><a class="headerlink" href="#qt-and-snippets" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les snippets Doxygen simple existent nativement dans Qt suffit de commencer à taper &#64;pour que la
liste de complétion de code les affiche.</p>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#table-des-matieres-qt">Création</a><a class="headerlink" href="#id2" title="Lien permanent vers ce titre">¶</a></h3>
<p>Menu Outils/options…</p>
<p>Ligne : Editeur de texte/onglets Extraits de code</p>
<p>Là on peut créer ses propres extraits de code.</p>
</div>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#table-des-matieres-qt">Utilisation</a><a class="headerlink" href="#id3" title="Lien permanent vers ce titre">¶</a></h3>
<p>L’utilisation des snippets dans Qt passe par le même procédé que la complétion de code.
Il suffit de commencer à taper le nom du snippet. On pourra par exemple faire précéder tous les
snippet Doxygen par doxy_. Ainsi en tapant doxy_ on obtient dans l’éditeur la liste de tout ses
snippets Doxygen.</p>
</div>
<div class="section" id="sauvegardes">
<h3><a class="toc-backref" href="#table-des-matieres-qt">Sauvegardes</a><a class="headerlink" href="#sauvegardes" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les snippets ne se trouvent pas dans</p>
<p>%QTINSTALLDIR%ToolsQtCreatorshareqtcreatorsnippets</p>
<p>mais dans</p>
<p>C:Users_votreLoginAppDataRoamingQtProjectqtcreatorsnippets</p>
</div>
</div>
<div class="section" id="weblinks">
<h2><a class="toc-backref" href="#table-des-matieres-qt">Weblinks</a><a class="headerlink" href="#weblinks" title="Lien permanent vers ce titre">¶</a></h2>
<dl class="footnote brackets">
<dt class="label" id="id4"><span class="brackets"><a class="fn-backref" href="#id5">1</a></span></dt>
<dd><p><a class="reference external" href="https://www.youtube.com/watch?v=050zzD4c-5c">https://www.youtube.com/watch?v=050zzD4c-5c</a></p>
</dd>
<dt class="label" id="id6"><span class="brackets">2</span><span class="fn-backref">(<a href="#id7">1</a>,<a href="#id8">2</a>)</span></dt>
<dd><p><a class="reference external" href="https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1898935-initiez-vous-a-qt">https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1898935-initiez-vous-a-qt</a></p>
</dd>
<dt class="label" id="id9"><span class="brackets"><a class="fn-backref" href="#id10">3</a></span></dt>
<dd><p><a class="reference external" href="https://doc.qt.io/">https://doc.qt.io/</a></p>
</dd>
<dt class="label" id="id11"><span class="brackets"><a class="fn-backref" href="#id12">4</a></span></dt>
<dd><p><a class="reference external" href="https://guillaumebelz.github.io/qtinstall/">https://guillaumebelz.github.io/qtinstall/</a></p>
</dd>
<dt class="label" id="id13"><span class="brackets"><a class="fn-backref" href="#id14">5</a></span></dt>
<dd><p><a class="reference external" href="https://doc.qt.io/qt-5/qmainwindow.html">https://doc.qt.io/qt-5/qmainwindow.html</a></p>
</dd>
<dt class="label" id="id15"><span class="brackets">6</span><span class="fn-backref">(<a href="#id16">1</a>,<a href="#id40">2</a>)</span></dt>
<dd><p><a class="reference external" href="https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1902751-communiquez-en-reseau-avec-son-programme">https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1902751-communiquez-en-reseau-avec-son-programme</a></p>
</dd>
<dt class="label" id="id17"><span class="brackets"><a class="fn-backref" href="#id18">7</a></span></dt>
<dd><p><a class="reference external" href="https://doc.qt.io/qt-5/designer-using-a-ui-file.html">https://doc.qt.io/qt-5/designer-using-a-ui-file.html</a></p>
</dd>
<dt class="label" id="id19"><span class="brackets"><a class="fn-backref" href="#id20">8</a></span></dt>
<dd><p><a class="reference external" href="https://doc.qt.io/qt-5/qlineedit.html">https://doc.qt.io/qt-5/qlineedit.html</a></p>
</dd>
<dt class="label" id="id21"><span class="brackets"><a class="fn-backref" href="#id22">9</a></span></dt>
<dd><p><a class="reference external" href="https://doc.qt.io/qt-5/qwidget.html">https://doc.qt.io/qt-5/qwidget.html</a></p>
</dd>
<dt class="label" id="id23"><span class="brackets"><a class="fn-backref" href="#id24">10</a></span></dt>
<dd><p><a class="reference external" href="https://doc.qt.io/qt-5/qpushbutton.html">https://doc.qt.io/qt-5/qpushbutton.html</a></p>
</dd>
<dt class="label" id="id25"><span class="brackets">11</span><span class="fn-backref">(<a href="#id26">1</a>,<a href="#id27">2</a>)</span></dt>
<dd><p><a class="reference external" href="https://doc.qt.io/qt-5/qfilesystemmodel.html#example-usage">https://doc.qt.io/qt-5/qfilesystemmodel.html#example-usage</a></p>
</dd>
<dt class="label" id="id28"><span class="brackets"><a class="fn-backref" href="#id29">12</a></span></dt>
<dd><p><a class="reference external" href="https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1902176-decouvrez-l-architecture-mvc-avec-les-widgets-complexes#/id/r-1902175">https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1902176-decouvrez-l-architecture-mvc-avec-les-widgets-complexes#/id/r-1902175</a></p>
</dd>
<dt class="label" id="id30"><span class="brackets"><a class="fn-backref" href="#id31">13</a></span></dt>
<dd><p><a class="reference external" href="https://stackoverflow.com/questions/43994584/what-is-qobject-cast">https://stackoverflow.com/questions/43994584/what-is-qobject-cast</a></p>
</dd>
<dt class="label" id="id32"><span class="brackets"><a class="fn-backref" href="#id33">14</a></span></dt>
<dd><p><a class="reference external" href="https://doc.qt.io/qt-5/qobject.html#sender">https://doc.qt.io/qt-5/qobject.html#sender</a></p>
</dd>
<dt class="label" id="id34"><span class="brackets"><a class="fn-backref" href="#id35">15</a></span></dt>
<dd><p><a class="reference external" href="https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1899731-utilisez-les-signaux-et-les-slots#/id/r-1909507">https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1899731-utilisez-les-signaux-et-les-slots#/id/r-1909507</a></p>
</dd>
<dt class="label" id="id36"><span class="brackets"><a class="fn-backref" href="#id37">16</a></span></dt>
<dd><p><a class="reference external" href="https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1901673-modelisez-ses-fenetres-avec-qt-designer#/id/r-1911443">https://openclassrooms.com/fr/courses/1894236-programmez-avec-le-langage-c/1901673-modelisez-ses-fenetres-avec-qt-designer#/id/r-1911443</a></p>
</dd>
<dt class="label" id="id38"><span class="brackets"><a class="fn-backref" href="#id39">17</a></span></dt>
<dd><p><a class="reference external" href="https://doc.qt.io/qt-5.9/standard-dialogs.html">https://doc.qt.io/qt-5.9/standard-dialogs.html</a></p>
</dd>
<dt class="label" id="id41"><span class="brackets"><a class="fn-backref" href="#id42">18</a></span></dt>
<dd><p><a class="reference external" href="https://doc.qt.io/qt-5/qdatastream.html#details">https://doc.qt.io/qt-5/qdatastream.html#details</a></p>
</dd>
<dt class="label" id="id43"><span class="brackets"><a class="fn-backref" href="#id44">19</a></span></dt>
<dd><p><a class="reference external" href="https://doc.qt.io/qt-5/qwidget.html#setLayout">https://doc.qt.io/qt-5/qwidget.html#setLayout</a></p>
</dd>
<dt class="label" id="id45"><span class="brackets"><a class="fn-backref" href="#id46">20</a></span></dt>
<dd><p><a class="reference external" href="https://doc.qt.io/qt-5/windows-deployment.html">https://doc.qt.io/qt-5/windows-deployment.html</a></p>
</dd>
<dt class="label" id="id47"><span class="brackets"><a class="fn-backref" href="#id48">21</a></span></dt>
<dd><p><a class="reference external" href="http://guillaume.belz.free.fr/doku.php?id=deployer_une_application_qt">http://guillaume.belz.free.fr/doku.php?id=deployer_une_application_qt</a></p>
</dd>
<dt class="label" id="id49"><span class="brackets"><a class="fn-backref" href="#id50">22</a></span></dt>
<dd><p><a class="reference external" href="https://wiki.qt.io/Deploy_an_Application_on_Windows/fr">https://wiki.qt.io/Deploy_an_Application_on_Windows/fr</a></p>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table des matières</a></h3>
  <ul>
<li><a class="reference internal" href="#">Notes sur Qt</a><ul>
<li><a class="reference internal" href="#presentation">Présentation</a><ul>
<li><a class="reference internal" href="#les-outils-qt">Les outils Qt</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#service-minimum">Service minimum</a><ul>
<li><a class="reference internal" href="#appli-console">Appli console</a></li>
<li><a class="reference internal" href="#appli-graphique">Appli graphique</a></li>
<li><a class="reference internal" href="#utilisation-avec-qt-designer">Utilisation avec Qt Designer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#autres-choses">Autres choses</a><ul>
<li><a class="reference internal" href="#qt-et-repertoires">Qt et répertoires</a></li>
<li><a class="reference internal" href="#mode-debug">Mode debug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#classes-qui-me-semblent-les-plus-utiles">Classes qui me semblent les plus utiles</a><ul>
<li><a class="reference internal" href="#de-base">De base</a></li>
<li><a class="reference internal" href="#advanced">Advanced</a></li>
</ul>
</li>
<li><a class="reference internal" href="#apres-modification-du-fichier-pro">Après modification du fichier pro</a></li>
<li><a class="reference internal" href="#qt-widgets-vs-qt-quick-application">Qt widgets vs Qt Quick application</a></li>
<li><a class="reference internal" href="#comprendre-signals-et-slots">Comprendre signals et slots</a><ul>
<li><a class="reference internal" href="#id1">Présentation</a></li>
<li><a class="reference internal" href="#utilisation">Utilisation</a></li>
<li><a class="reference internal" href="#connaitre-l-emetteur-d-un-signal-dans-un-slot">Connaître l’émetteur d’un signal dans un slot</a></li>
<li><a class="reference internal" href="#creation">Création</a></li>
<li><a class="reference internal" href="#autoconnect">Autoconnect</a></li>
</ul>
</li>
<li><a class="reference internal" href="#petits-tracas">Petits tracas</a></li>
<li><a class="reference internal" href="#cout">cout</a><ul>
<li><a class="reference internal" href="#undifined-cout">undifined cout</a></li>
<li><a class="reference internal" href="#qstring-vs-cout">QString vs cout</a></li>
</ul>
</li>
<li><a class="reference internal" href="#boite-de-dialogue-standard">Boîte de dialogue standard</a></li>
<li><a class="reference internal" href="#qt-layout">Qt layout</a></li>
<li><a class="reference internal" href="#communication-reseau">Communication réseau</a><ul>
<li><a class="reference internal" href="#architecture-client-serveur">Architecture client/serveur</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tips">Tips</a></li>
<li><a class="reference internal" href="#deploiement">Deploiement</a><ul>
<li><a class="reference internal" href="#qt-static-linking">Qt static linking</a></li>
</ul>
</li>
<li><a class="reference internal" href="#qt-and-snippets">Qt and snippets</a><ul>
<li><a class="reference internal" href="#id2">Création</a></li>
<li><a class="reference internal" href="#id3">Utilisation</a></li>
<li><a class="reference internal" href="#sauvegardes">Sauvegardes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#weblinks">Weblinks</a></li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="../visualCpp/visual.html"
                        title="Chapitre précédent">Note concernant Visal C++ 2013 *</a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="../../lesObjetsConnectes/lesObjetsConnectes.html"
                        title="Chapitre suivant">Les objets connectés</a></p>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/C++/Qt/Qt.rst.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="../../lesObjetsConnectes/lesObjetsConnectes.html" title="Les objets connectés"
             >suivant</a> |</li>
        <li class="right" >
          <a href="../visualCpp/visual.html" title="Note concernant Visal C++ 2013 *"
             >précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation MajorLee&#39;s notes </a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../cpp.html" >Mes notes sur C++</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, J.SORANZO.
      Créé avec <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.
    </div>
  </body>
</html>